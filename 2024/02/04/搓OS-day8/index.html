<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>搓OS-day8 | 脱碳甲醛的博客</title><meta name="keywords" content="搓OS.log"><meta name="author" content="脱碳甲醛"><meta name="copyright" content="脱碳甲醛"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="手搓OS-day8 同步 本篇仅仅是实现同步问题，如果你问同步问题是什么，在应付考研的时候怎么搞，我也不介意写一手（） 在OS中同步的理解是非常抽象的，抽象就抽象在和我们日常的理解完全不一样。在我们日常生活中讲同步，往往是这样一个情景；   同步率100%  嗯，所以在计算机领域中，我们也会习惯性的认为同步嘛，就是两个某种主体做着一样的动作（好怪），而在计算机领域中我们平时理解的同">
<meta property="og:type" content="article">
<meta property="og:title" content="搓OS-day8">
<meta property="og:url" content="http://example.com/2024/02/04/%E6%90%93OS-day8/index.html">
<meta property="og:site_name" content="脱碳甲醛的博客">
<meta property="og:description" content="手搓OS-day8 同步 本篇仅仅是实现同步问题，如果你问同步问题是什么，在应付考研的时候怎么搞，我也不介意写一手（） 在OS中同步的理解是非常抽象的，抽象就抽象在和我们日常的理解完全不一样。在我们日常生活中讲同步，往往是这样一个情景；   同步率100%  嗯，所以在计算机领域中，我们也会习惯性的认为同步嘛，就是两个某种主体做着一样的动作（好怪），而在计算机领域中我们平时理解的同">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/%20typora/%E5%A4%B4%E5%9B%BE21_1.png">
<meta property="article:published_time" content="2024-02-04T15:55:11.000Z">
<meta property="article:modified_time" content="2024-02-10T14:24:55.775Z">
<meta property="article:author" content="脱碳甲醛">
<meta property="article:tag" content="搓OS.log">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/%20typora/%E5%A4%B4%E5%9B%BE21_1.png"><link rel="shortcut icon" href="/img/%E5%9B%BE%E6%A0%87.png"><link rel="canonical" href="http://example.com/2024/02/04/%E6%90%93OS-day8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '搓OS-day8',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-10 22:24:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mycss.css"><link rel="stylesheet" href="/css/footer.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/web_bg.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图20.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">脱碳甲醛的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">搓OS-day8</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-02-04T15:55:11.000Z" title="发表于 2024-02-04 23:55:11">2024-02-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-10T14:24:55.775Z" title="更新于 2024-02-10 22:24:55">2024-02-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="leancloud_visitors" id="/2024/02/04/%E6%90%93OS-day8/" data-flag-title="搓OS-day8"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span class="leancloud-visitors-count"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2024/02/04/%E6%90%93OS-day8/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2024/02/04/%E6%90%93OS-day8/" itemprop="commentCount"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="手搓os-day8">手搓OS-day8</h2>
<h3 id="同步">同步</h3>
<p>本篇仅仅是实现同步问题，如果你问同步问题是什么，在应付考研的时候怎么搞，我也不介意写一手（）</p>
<p>在OS中同步的理解是非常抽象的，抽象就抽象在和我们日常的理解完全不一样。在我们日常生活中讲同步，往往是这样一个情景；</p>
<figure>
<img
src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/%20typora/bili_v_1707558407748.gif"
alt="同步率100%" />
<figcaption aria-hidden="true">同步率100%</figcaption>
</figure>
<p>嗯，所以在计算机领域中，我们也会习惯性的认为同步嘛，就是两个某种主体做着一样的动作（好怪），而在计算机领域中我们平时理解的同步其实是一种比较特殊的并行。</p>
<p>先来一个别扭且不恰当的比喻，首先必须说明我们生活中的活动有些是瞬间完成的，有些是需要一定时间的，下面是不太正常比喻：（①）有一个前来买瓜，（②）该人询问这瓜多少钱并（③）表示“你这瓜是瓜皮子是金子做的还是瓜粒子是金子做的“，（④）然后一刀捅穿了瓜摊老板，
（⑤）传出了阵阵”萨日朗“。</p>
<figure>
<img
src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/%20typora/image-20240210195115716.png"
alt="火红的萨日朗" />
<figcaption aria-hidden="true">火红的萨日朗</figcaption>
</figure>
<p>上面的小故事由五个步骤组成，所有的情节发生都是有因果关系的，因此不能出现顺序的变化，不可能在捅穿老板之前就传出“萨日朗”，也不能在找茬之前就捅穿（不许抬杠），这种必须按照一定顺序去执行（需要完全执行一步，才能执行下一步）的故（程）事（序），就是同步。</p>
<p>说同步就不得不说一下异步，在生活中往往同步和异步是同时存在的。在一串串有逻辑相关的同步中，往往存在着异步。引用从知乎上看到的比喻：异步就是在你蒸饭期间去炒菜，也就是不必等待蒸饭结束的过程。</p>
<p>OK，那么为什么要提出同步和异步的问题呢？</p>
<p><img src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/%20typora/WQwhQnXTwU8O3QIIIOEErvBWzIYlzF1O.JPEG" style="zoom: 25%;" /></p>
<p>这就不得不提一下我们之前研究过的并发技术了，因为为了榨干每一滴处理机，计算机科学家机智的想出来了用程序对处理机进行车轮战。但是这种车轮战是不可控的，我们不知道什么时候哪个程序会占用处理机，所以当处理需要必要的逻辑顺序时，同步的问题就很重要了。而异步是因为有了一大串同步，干等着又不符合计算机科学家喜欢榨干处理机的风格，因此又提出了异步问题。</p>
<h3 id="实现与简单介绍">实现与简单介绍</h3>
<h4 id="生产者-消费者问题">生产者-消费者问题</h4>
<p>问题我不太会介绍，于是我决定直接剽窃一个问题介绍：</p>
<blockquote>
<p>Dijkstra wrote about the unbounded buffer case: "We consider two
processes, which are called the 'producer' and the 'consumer'
respectively. The producer is a cyclic process and each time it goes
through its cycle it produces a certain portion of information, that has
to be processed by the consumer. The consumer is also a cyclic process
and each time it goes through its cycle, it can process the next portion
of information, as has been produced by the producer ... We assume the
two processes to be connected for this purpose via a buffer with
unbounded capacity."</p>
</blockquote>
<p>没错就是那个Dijkstra，由于我是懒狗，所以我决定翻译也交给chatGPT（虽然我相信大家是能直接看懂的）：</p>
<blockquote>
<p>迪杰斯特拉
（Dijkstra）描述了无界缓冲区的情况：“我们考虑两个进程，分别称为’生产者’和’消费者’。生产者是一个循环过程，每次经过循环会产生一定量的信息，这些信息需要消费者进行处理。消费者也是一个循环过程，每次经过循环时，可以处理生产者产生的下一个信息部分…为此，我们假设这两个进程通过一个容量无限的缓冲区连接在一起。”</p>
</blockquote>
<p>学过操作系统的都知道，解决同步问题用的是信号量机制。所以我们也就不去走弯路了，直奔信号量机制（当然直接调用管程也是可以的）。</p>
<p>停，这里他用了一个很骚的操作：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,count=<span class="number">0</span>;</span><br><span class="line"><span class="type">mutex_t</span> lk=MUTEX_INIT();</span><br><span class="line"><span class="type">cond_t</span> cv=COND_INIT();</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CAN_PRODUCE (count&lt;n)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CAN_CONSUME (count&gt;n)</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Tproduce</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        mutex_lock(&amp;lk);</span><br><span class="line">        <span class="keyword">while</span> (!CAN_PRODUCE)</span><br><span class="line">        &#123;</span><br><span class="line">            cond_wait(&amp;cv,&amp;lk);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;(&quot;</span>);</span><br><span class="line">        count++;</span><br><span class="line">        cond_broadcast(&amp;cv);</span><br><span class="line">        mutex_unlock(&amp;lk);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Tconsume</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    mutex_lock(&amp;lk);</span><br><span class="line">    <span class="keyword">while</span> (!CAN_CONSUME) &#123;</span><br><span class="line">      cond_wait(&amp;cv, &amp;lk);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;)&quot;</span>); count--;</span><br><span class="line">    cond_broadcast(&amp;cv);</span><br><span class="line">    mutex_unlock(&amp;lk);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种方法称为条件变量法，有没有感觉他和前面Peterson算法的flag很像，其实就是很像，作为一个标志来放行。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">sem_t</span> fill, empty;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Tproduce</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    P(&amp;empty);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;(&quot;</span>);</span><br><span class="line">    V(&amp;fill);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Tconsume</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    P(&amp;fill);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">    V(&amp;empty);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不细说，好理解，下一个</p>
<h4 id="哲学家就餐问题">哲学家就餐问题</h4>
<p>省流：操作的时候无脑mutex住，就不会出死锁bug</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">sem_t</span> chopsticks[<span class="number">5</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="type">mutex_t</span> lk=MUTEX_INIT();</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">philosopher</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    mutex_lock(&amp;lk);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;搞哲♂学&quot;</span>);</span><br><span class="line">    P(&amp;chopsticks[i+<span class="number">1</span>]%<span class="number">5</span>);</span><br><span class="line">    P(&amp;chopsticks[i])</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;吃&quot;</span>);</span><br><span class="line">    V(&amp;chopsticks[i+<span class="number">1</span>]%<span class="number">5</span>);</span><br><span class="line">    V(&amp;chopsticks[i])</span><br><span class="line">    mutex_unlock(&amp;lk);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="总结">总结</h3>
<p>有用但不难，平时考察很频繁，记住要点很重要：</p>
<ol type="1">
<li>分析什么是互斥访问的</li>
<li>互斥加锁</li>
<li>分析什么是同步访问的</li>
<li>同步访问涉及什么资源，需要什么p什么v什么</li>
<li>添加对应的信号量</li>
<li>检查是否死锁，死锁则调整互斥锁与pv操作的顺序</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">脱碳甲醛</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/02/04/%E6%90%93OS-day8/">http://example.com/2024/02/04/%E6%90%93OS-day8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">脱碳甲醛的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%90%93OS-log/">搓OS.log</a></div><div class="post_share"><div class="social-share" data-image="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图21_1.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/04/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB1/"><img class="prev-cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图20.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">论文阅读1-TFDNet</div></div></a></div><div class="next-post pull-right"><a href="/2024/02/04/%E6%90%93OS-%E7%95%AA%E5%A4%961/"><img class="next-cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图19.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">手搓OS-番外1</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/01/08/%E6%90%93OS-day0/" title="搓OS-day0"><img class="cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图12.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-08</div><div class="title">搓OS-day0</div></div></a></div><div><a href="/2024/01/09/%E6%90%93OS-day1/" title="搓OS-day1"><img class="cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图11.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-09</div><div class="title">搓OS-day1</div></div></a></div><div><a href="/2024/01/10/%E6%90%93OS-day2/" title="搓OS-day2"><img class="cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图13.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-10</div><div class="title">搓OS-day2</div></div></a></div><div><a href="/2024/01/10/%E6%90%93OS-day3/" title="搓OS-day3"><img class="cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图14.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-10</div><div class="title">搓OS-day3</div></div></a></div><div><a href="/2024/01/12/%E6%90%93OS-day4/" title="搓OS-day4"><img class="cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图15.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-12</div><div class="title">搓OS-day4</div></div></a></div><div><a href="/2024/01/14/%E6%90%93OS-day5/" title="搓OS-day5"><img class="cover" src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图16.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-14</div><div class="title">搓OS-day5</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">脱碳甲醛</div><div class="author-info__description">菜狗，心血来潮</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/DecarburizationFormaldehyde"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/DecarburizationFormaldehyde" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:690615906@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到海鲜批发市场！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E6%90%93os-day8"><span class="toc-number">1.</span> <span class="toc-text">手搓OS-day8</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5"><span class="toc-number">1.1.</span> <span class="toc-text">同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.</span> <span class="toc-text">实现与简单介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.1.</span> <span class="toc-text">生产者-消费者问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%B2%E5%AD%A6%E5%AE%B6%E5%B0%B1%E9%A4%90%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.2.</span> <span class="toc-text">哲学家就餐问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/21/tranformer%E7%BB%86%E8%8A%82%E8%A7%A3%E6%9E%90/" title="tranformer全流程零基础解析"><img src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/1a510a031ef340581f2b169fbf51597f490518248.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="tranformer全流程零基础解析"/></a><div class="content"><a class="title" href="/2024/07/21/tranformer%E7%BB%86%E8%8A%82%E8%A7%A3%E6%9E%90/" title="tranformer全流程零基础解析">tranformer全流程零基础解析</a><time datetime="2024-07-21T02:57:29.000Z" title="发表于 2024-07-21 10:57:29">2024-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/11/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1%E5%AD%A6%EF%BC%88%E4%B8%80%EF%BC%89/" title="多元统计学（一）"><img src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="多元统计学（一）"/></a><div class="content"><a class="title" href="/2024/06/11/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1%E5%AD%A6%EF%BC%88%E4%B8%80%EF%BC%89/" title="多元统计学（一）">多元统计学（一）</a><time datetime="2024-06-11T06:14:00.000Z" title="发表于 2024-06-11 14:14:00">2024-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/31/%E5%AE%9A%E5%BC%8F%E2%80%94%E2%80%94%E6%97%A0%E5%BF%A7%E8%A7%92%E6%89%98/" title="定式——无忧角托"><img src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/katago.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="定式——无忧角托"/></a><div class="content"><a class="title" href="/2024/05/31/%E5%AE%9A%E5%BC%8F%E2%80%94%E2%80%94%E6%97%A0%E5%BF%A7%E8%A7%92%E6%89%98/" title="定式——无忧角托">定式——无忧角托</a><time datetime="2024-05-31T06:18:59.000Z" title="发表于 2024-05-31 14:18:59">2024-05-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/02/%E8%B6%85%E5%9B%BE%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8/" title="超图简单入门"><img src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/picture_in_wx_4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="超图简单入门"/></a><div class="content"><a class="title" href="/2024/05/02/%E8%B6%85%E5%9B%BE%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8/" title="超图简单入门">超图简单入门</a><time datetime="2024-05-02T08:40:48.000Z" title="发表于 2024-05-02 16:40:48">2024-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/23/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E4%BC%98%E5%8C%96/" title="深度学习中的优化"><img src="https://blogpicture-1310464487.cos.ap-nanjing.myqcloud.com/ typora/头图24_1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深度学习中的优化"/></a><div class="content"><a class="title" href="/2024/02/23/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E4%BC%98%E5%8C%96/" title="深度学习中的优化">深度学习中的优化</a><time datetime="2024-02-23T12:00:32.000Z" title="发表于 2024-02-23 20:00:32">2024-02-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 脱碳甲醛</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'n33P9kVvXyIyjzIOpniVm5f9-MdYXbMMI',
      appKey: 'yz9sAXxhKmMFWg1T6zGIhSsP',
      avatar: 'monsterid',
      serverURLs: 'https://n33p9kvv.api.lncldglobal.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>